generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model BarberShop {
  id        Int        @id @default(autoincrement())
  name      String
  email     String     @unique
  slug      String     @unique
  address   String
  phone     String
  barbers   Barber[]
  createdAt DateTime   @default(now())
  hairs     Hair[]
  schedules Schedule[]
}

model Barber {
  id           Int        @id @default(autoincrement())
  barberShopId Int
  barberShop   BarberShop @relation(fields: [barberShopId], references: [id])
  name         String
  email        String     @unique
  phone        String
  createdAt    DateTime   @default(now())
}

model Hair {
  id           Int        @id @default(autoincrement())
  photoUrl     String
  name         String
  price        Float
  barberShopId Int
  barberShop   BarberShop @relation(fields: [barberShopId], references: [id])
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
}

model Schedule {
  id                    Int                    @id @default(autoincrement())
  barberShopId          Int
  barberShop            BarberShop             @relation(fields: [barberShopId], references: [id])
  createdAt             DateTime               @default(now())
  updatedAt             DateTime               @updatedAt
  week                  ScheduleWeek[]
  custom                ScheduleCustom[]
  scheduleNotAvailables ScheduleNotAvailable[]
  schedulePeriods       SchedulePeriod[]
}

model ScheduleWeek {
  id         Int      @id @default(autoincrement())
  scheduleId Int
  schedule   Schedule @relation(fields: [scheduleId], references: [id])
  date       DateTime
  createdAt  DateTime @default(now())
}

model ScheduleCustom {
  id         Int      @id @default(autoincrement())
  scheduleId Int
  schedule   Schedule @relation(fields: [scheduleId], references: [id])
  date       DateTime
  createdAt  DateTime @default(now())
}

model SchedulePeriod {
  id         Int      @id @default(autoincrement())
  scheduleId Int
  schedule   Schedule @relation(fields: [scheduleId], references: [id])
  startTime  DateTime
  endTime    DateTime
  duration   Int
  createdAt  DateTime @default(now())
}

model ScheduleNotAvailable {
  id         Int      @id @default(autoincrement())
  scheduleId Int
  schedule   Schedule @relation(fields: [scheduleId], references: [id])
  date       DateTime
  createdAt  DateTime @default(now())
}
